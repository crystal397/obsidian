- # Email 오퍼레이터란?
	- Airflow에서 기본 제공하는 오퍼레이터 중 하나로 Email 전송하는 오퍼레이터
	- dags_email_operator
		```
		from airflow import DAG
		import pendulum
		from airflow.operators.email import EmailOperator
		
		with DAG(
		    dag_id="dags_email_operator",
		    schedule="0 8 1 * *",
		    start_date=pendulum.datetime(2024, 6, 1, tz="Asia/Seoul"),
		    catchup=False
		) as dag:
		    send_email_task = EmailOperator(
		        task_id='send_email_task',
		        to='{전송 받을 이메일}',
		        subject='Airflow 성공메일',
		        html_content='Airflow 작업이 완료되었습니다'
		    )
		```
	- Email 설정
		- Email 전송을 위해서 직접 Email 서버를 구축하거나 Email 서버에 전송 요청을 해야함
		- Email 오퍼레이터를 처리하는 Worker 컨테이너는 Email 전송을 요청하는 클라이언트
			![400](https://i.imgur.com/NlTDd2W.png)
		- Gmail 계정 내 설정
			- Gmail -> 설정 -> 모든 설정보기 -> 전달및 pop/imap -> imap사용
			- 구글 계정관리 -> 앱 비밀번호 검색 -> 앱 이름 입력하고 만들기
				- (발급받은 앱 비밀번호 복사)
		- docker-compose.yaml 수정 (공백 주의!! 코드 뒤에도 공백 있으면 안됨!!)
			```
			AIRFLOW__SMTP__SMTP_HOST: 'smtp.gmail.com'
			AIRFLOW__SMTP__SMTP_USER: '{gmail 계정}'
			AIRFLOW__SMTP__SMTP_PASSWORD: '##SMTP_PASSWORD##'
			AIRFLOW__SMTP__SMTP_PORT: 587
			AIRFLOW__SMTP__SMTP_MAIL_FROM: '{gmail 계정}'
			```
			※ SMTP_PASSWORD항목 앱 비밀번호를 넣지 마세요.
				github push할 경우 해킹 위험
				
		- `cd /home/ubuntu`
		- `vi deploy`
			```
			AIRFLOW_HOME=/home/ubuntu/yeardream_airflow
			cd $AIRFLOW_HOME
			git pull
			sed -i 's/##SMTP_PASSWORD##/MY_PASSWORD/g' $AIRFLOW_HOME/docker-compose.yaml
			```
			- MY_PASSWORD <-> 자신의 gmail 앱 비밀번호로 수정
		- `chmod +x deploy.sh` 권한 부여
		- `./deploy.sh` git pull 대신 deploy.sh 실행